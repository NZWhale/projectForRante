!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"loginHandler",(function(){return y}));var r=function(t,e,n,r){return new(n||(n=Promise))((function(o,u){function i(t){try{c(r.next(t))}catch(t){u(t)}}function a(t){try{c(r.throw(t))}catch(t){u(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=document.getElementById("root");function i(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,fetch(t)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))}function a(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,i(t)];case 1:return e=r.sent(),n=(o=e)[Math.floor(Math.random()*o.length)],document.body.style.backgroundImage="url(http://127.0.0.1:3000"+n+")",document.body.style.backgroundSize="110%",document.body.style.backgroundRepeat="no-repeat",[2]}var o}))}))}var c=function(t,e,n,r){var o;(void 0===(o={login:t,password:e})&&(o={}),fetch(n,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(t){return t}),(function(t){console.log(t,"data wasn't wrote")}))).then((function(t){if(200===t.status)return r.setLoginStatus(!0),s(u,r),t}))},s=function(t,e){t.innerHTML="";var n=l(t,"background"),r=l(t,"parts"),o=l(t,"full"),u=d("input","exitButton");u.setAttribute("type","button"),u.innerText="exit",u.addEventListener("click",(function(){e.setLoginStatus(!1)})),t.append(n,r,o,u)},l=function(t,e){var n=document.createElement("div"),r=document.createElement("form"),o=document.createElement("input"),u=document.createElement("input");return r.setAttribute("action","/"+e),r.setAttribute("method","POST"),r.setAttribute("enctype","multipart/form-data"),o.setAttribute("type","file"),o.setAttribute("name","images"),o.setAttribute("multiple","true"),u.setAttribute("type","submit"),u.setAttribute("value","Send file"),n.innerText=""+e,r.append(o,u),n.append(r),n},d=function(t,e){var n=document.createElement(t);return n.setAttribute("id",e),n},f=function(t,e,n){var r=d("input","adminAccess");return r.setAttribute("type","button"),r.setAttribute("value","admin access"),r.addEventListener("click",(function(){document.body.style.backgroundImage="",t.innerHTML="",function(t,e,n){var r=d("div","loginDiv"),o=d("input","loginForm"),u=d("input","passwordForm"),i=d("input","loginButton");i.addEventListener("click",(function(t){var r=document.getElementById("loginForm").value,o=document.getElementById("passwordForm").value;13===t.keyCode?r?o?c(r,o,n,e):alert("Please enter password"):alert("Please enter login"):c(r,o,n,e)})),u.setAttribute("type","password"),i.setAttribute("type","submit"),r.append(o,u,i),t.append(r)}(t,e,n)})),r};class p extends class{constructor(){this._handlers=[]}addChangeEventListener(t){this._handlers.push(t)}executeHandlers(){this._handlers.forEach(t=>{t()})}}{constructor(){super(),this._userIsLoggedIn=!1}setLoginStatus(t){this._userIsLoggedIn=t,this.executeHandlers()}getLoginStatus(){return this._userIsLoggedIn}}var b=function(t,e,n,r){return new(n||(n=Promise))((function(o,u){function i(t){try{c(r.next(t))}catch(t){u(t)}}function a(t){try{c(r.throw(t))}catch(t){u(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((r=r.apply(t,e||[])).next())}))},h=function(t,e){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},y="http://127.0.0.1:3000/login";window.addEventListener("load",(function(){return b(void 0,void 0,void 0,(function(){var t,e,n;return h(this,(function(r){switch(r.label){case 0:return t=document.getElementById("root"),e=new p,n=f(t,e,y),[4,a("http://127.0.0.1:3000/getbackground")];case 1:return r.sent(),t.append(n),[2]}}))}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9hZG1pblBhZ2VWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9odG1sVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xvZ2luUGFnZU1vZGVsLmpzIiwid2VicGFjazovLy8uL3NyYy9FdmVudEVtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJpdGVyYXRvciIsInRoaXMiLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJwb3AiLCJsZW5ndGgiLCJwdXNoIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEJhY2tncm91bmRVcmxzIiwiYmFja2dyb3VuZFVybCIsIl9hIiwiZmV0Y2giLCJqc29uIiwiY3JlYXRlQmFja2dyb3VuZCIsImFycmF5T2ZCYWNrZ3JvdW5kVXJscyIsInNpbmdsZUJhY2tncm91bmRVcmwiLCJhcnJheSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFNpemUiLCJiYWNrZ3JvdW5kUmVwZWF0IiwibG9naW4iLCJwYXNzd29yZCIsImxvZ2luSGFuZGxlciIsImxvZ2luUGFnZU1vZGVsSW5zdGFuY2UiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwicmVzcG9uc2UiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwic2V0TG9naW5TdGF0dXMiLCJyZW5kZXJBZG1pblBhZ2UiLCJyb290RWxlbWVudCIsImlubmVySFRNTCIsImJhY2tncm91bmRJbnB1dCIsImNyZWF0ZUltYWdlSW5wdXQiLCJwYXJ0c0lucHV0IiwiZnVsbElucHV0IiwiZXhpdEJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwiYXBwZW5kIiwiZGl2IiwiZm9ybSIsImZpbGVJbnB1dCIsInN1Ym1pdElucHV0IiwidHlwZSIsImlkIiwiZWxlbWVudCIsImNyZWF0ZUFkbWluQWNjZXNzQnV0dG9uIiwiYWRtaW5BY2Nlc3NCdXR0b24iLCJsb2dpbkRpdiIsImxvZ2luRm9ybSIsInBhc3N3b3JkRm9ybSIsImxvZ2luQnV0dG9uIiwibG9naW5WYWx1ZSIsInBhc3N3b3JkVmFsdWUiLCJrZXlDb2RlIiwiYWxlcnQiLCJyZW5kZXJBZG1pbkxvZ2luUGFnZSIsIl9oYW5kbGVycyIsImhhbmRsZXIiLCJmb3JFYWNoIiwic3VwZXIiLCJfdXNlcklzTG9nZ2VkSW4iLCJ1c2VySXNMb2dnZWRJbiIsImV4ZWN1dGVIYW5kbGVycyIsIndpbmRvdyJd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T0FBUSxHQUFRLFdBQ25GLElBQUlWLEVBQWFiLEVBQXdCaUMsRUFDekMsT0FBTyxFQUFZN0QsTUFBTSxTQUFVVyxHQUMvQixPQUFRQSxFQUFHakIsT0FDUCxLQUFLLEVBSUQsT0FIQStDLEVBQWNsQyxTQUFTQyxlQUFlLFFBQ3RDb0IsRUFBeUIsSUFBSSxFQUM3QmlDLEVBQW9CRCxFQUF3Qm5CLEVBQWFiLEVBQXdCLEdBQzFFLENBQUMsRUFBYWQsRUxYVix3Q0tZZixLQUFLLEVBR0QsT0FGQUgsRUFBR2hCLE9BQ0g4QyxFQUFZVyxPQUFPUyxHQUNaLENBQUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IHJlbmRlckFkbWluUGFnZSB9IGZyb20gXCIuL2FkbWluUGFnZVZpZXdcIjtcbmV4cG9ydCB2YXIgYmFja2dyb3VuZFVybCA9IFwiaHR0cDovLzEyNy4wLjAuMTozMDAwL2dldGJhY2tncm91bmRcIjtcbmV4cG9ydCB2YXIgcGFydHNVcmwgPSBcImh0dHA6Ly8xMjcuMC4wLjE6MzAwMC9nZXRwYXJ0XCI7XG5leHBvcnQgdmFyIGZ1bGxVcmwgPSBcImh0dHA6Ly8xMjcuMC4wLjE6MzAwMC9nZXRmdWxsXCI7XG5leHBvcnQgdmFyIGxvZ2luSGFuZGxlciA9IFwiaHR0cDovLzEyNy4wLjAuMTozMDAwL2xvZ2luXCI7XG52YXIgcm9vdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIik7XG52YXIgZ2V0UmFuZG9tTGluayA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgIHZhciByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpO1xuICAgIHZhciByYW5kb21MaW5rID0gYXJyYXlbcmFuZG9tTnVtYmVyXTtcbiAgICByZXR1cm4gcmFuZG9tTGluaztcbn07XG5mdW5jdGlvbiBnZXRCYWNrZ3JvdW5kVXJscyhiYWNrZ3JvdW5kVXJsKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzcG9uc2UsIHVybHM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKGJhY2tncm91bmRVcmwpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgdXJscyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVybHNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCYWNrZ3JvdW5kKGJhY2tncm91bmRVcmwpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcnJheU9mQmFja2dyb3VuZFVybHMsIHNpbmdsZUJhY2tncm91bmRVcmw7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEJhY2tncm91bmRVcmxzKGJhY2tncm91bmRVcmwpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGFycmF5T2ZCYWNrZ3JvdW5kVXJscyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlQmFja2dyb3VuZFVybCA9IGdldFJhbmRvbUxpbmsoYXJyYXlPZkJhY2tncm91bmRVcmxzKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChodHRwOi8vMTI3LjAuMC4xOjMwMDBcIiArIHNpbmdsZUJhY2tncm91bmRVcmwgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IFwiMTEwJVwiO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSBcIm5vLXJlcGVhdFwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZmV0Y2hSZXF1ZXN0KG1ldGhvZCwgdXJsLCBib2R5KSB7XG4gICAgaWYgKGJvZHkgPT09IHZvaWQgMCkgeyBib2R5ID0ge307IH1cbiAgICB2YXIgaGVhZGVycyA9IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9O1xuICAgIHZhciByZXNwb25zZVByb21pc2UgPSBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyLCBcImRhdGEgd2Fzbid0IHdyb3RlXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXNwb25zZVByb21pc2U7XG59XG5leHBvcnQgdmFyIGxvZ2luID0gZnVuY3Rpb24gKGxvZ2luLCBwYXNzd29yZCwgbG9naW5IYW5kbGVyLCBsb2dpblBhZ2VNb2RlbEluc3RhbmNlKSB7XG4gICAgdmFyIHVzZXIgPSB7XG4gICAgICAgIGxvZ2luOiBsb2dpbixcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgfTtcbiAgICB2YXIgbG9naW5Qcm9taXNlID0gZmV0Y2hSZXF1ZXN0KFwiUE9TVFwiLCBsb2dpbkhhbmRsZXIsIHVzZXIpO1xuICAgIGxvZ2luUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIGxvZ2luUGFnZU1vZGVsSW5zdGFuY2Uuc2V0TG9naW5TdGF0dXModHJ1ZSk7XG4gICAgICAgICAgICByZW5kZXJBZG1pblBhZ2Uocm9vdEVsZW1lbnQsIGxvZ2luUGFnZU1vZGVsSW5zdGFuY2UpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgY3JlYXRlSW1hZ2VJbnB1dCB9IGZyb20gXCIuL2h0bWxVdGlsc1wiO1xuaW1wb3J0IHsgbG9naW4gfSBmcm9tIFwiLi91dGlsc1wiO1xuZXhwb3J0IHZhciByZW5kZXJBZG1pbkxvZ2luUGFnZSA9IGZ1bmN0aW9uIChyb290RWxlbWVudCwgbG9naW5QYWdlTW9kZWxJbnN0YW5jZSwgbG9naW5IYW5kbGVyKSB7XG4gICAgdmFyIGxvZ2luRGl2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImxvZ2luRGl2XCIpO1xuICAgIHZhciBsb2dpbkZvcm0gPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJsb2dpbkZvcm1cIik7XG4gICAgdmFyIHBhc3N3b3JkRm9ybSA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcInBhc3N3b3JkRm9ybVwiKTtcbiAgICB2YXIgbG9naW5CdXR0b24gPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJsb2dpbkJ1dHRvblwiKTtcbiAgICBsb2dpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGxvZ2luVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luRm9ybVwiKS52YWx1ZTtcbiAgICAgICAgdmFyIHBhc3N3b3JkVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3N3b3JkRm9ybVwiKS52YWx1ZTtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgIGlmICghbG9naW5WYWx1ZSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGVudGVyIGxvZ2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXNzd29yZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGVudGVyIHBhc3N3b3JkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9naW4obG9naW5WYWx1ZSwgcGFzc3dvcmRWYWx1ZSwgbG9naW5IYW5kbGVyLCBsb2dpblBhZ2VNb2RlbEluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dpbihsb2dpblZhbHVlLCBwYXNzd29yZFZhbHVlLCBsb2dpbkhhbmRsZXIsIGxvZ2luUGFnZU1vZGVsSW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcGFzc3dvcmRGb3JtLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJwYXNzd29yZFwiKTtcbiAgICBsb2dpbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgIGxvZ2luRGl2LmFwcGVuZChsb2dpbkZvcm0sIHBhc3N3b3JkRm9ybSwgbG9naW5CdXR0b24pO1xuICAgIHJvb3RFbGVtZW50LmFwcGVuZChsb2dpbkRpdik7XG59O1xuZXhwb3J0IHZhciByZW5kZXJBZG1pblBhZ2UgPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQsIGxvZ2luUGFnZU1vZGVsSW5zdGFuY2UpIHtcbiAgICByb290RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHZhciBiYWNrZ3JvdW5kSW5wdXQgPSBjcmVhdGVJbWFnZUlucHV0KHJvb3RFbGVtZW50LCBcImJhY2tncm91bmRcIik7XG4gICAgdmFyIHBhcnRzSW5wdXQgPSBjcmVhdGVJbWFnZUlucHV0KHJvb3RFbGVtZW50LCBcInBhcnRzXCIpO1xuICAgIHZhciBmdWxsSW5wdXQgPSBjcmVhdGVJbWFnZUlucHV0KHJvb3RFbGVtZW50LCBcImZ1bGxcIik7XG4gICAgdmFyIGV4aXRCdXR0b24gPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJleGl0QnV0dG9uXCIpO1xuICAgIGV4aXRCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICBleGl0QnV0dG9uLmlubmVyVGV4dCA9IFwiZXhpdFwiO1xuICAgIGV4aXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbG9naW5QYWdlTW9kZWxJbnN0YW5jZS5zZXRMb2dpblN0YXR1cyhmYWxzZSk7XG4gICAgfSk7XG4gICAgcm9vdEVsZW1lbnQuYXBwZW5kKGJhY2tncm91bmRJbnB1dCwgcGFydHNJbnB1dCwgZnVsbElucHV0LCBleGl0QnV0dG9uKTtcbn07XG4iLCJpbXBvcnQgeyByZW5kZXJBZG1pbkxvZ2luUGFnZSB9IGZyb20gXCIuL2FkbWluUGFnZVZpZXdcIjtcbmV4cG9ydCB2YXIgY3JlYXRlSW1hZ2VJbnB1dCA9IGZ1bmN0aW9uIChyb290RWxlbWVudCwgbmFtZSkge1xuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHZhciBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIHZhciBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHZhciBzdWJtaXRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIiwgXCIvXCIgKyBuYW1lKTtcbiAgICBmb3JtLnNldEF0dHJpYnV0ZShcIm1ldGhvZFwiLCBcIlBPU1RcIik7XG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJlbmN0eXBlXCIsIFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiKTtcbiAgICBmaWxlSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImZpbGVcIik7XG4gICAgZmlsZUlucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJpbWFnZXNcIik7XG4gICAgZmlsZUlucHV0LnNldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIsIFwidHJ1ZVwiKTtcbiAgICBzdWJtaXRJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgIHN1Ym1pdElucHV0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiU2VuZCBmaWxlXCIpO1xuICAgIGRpdi5pbm5lclRleHQgPSBcIlwiICsgbmFtZTtcbiAgICBmb3JtLmFwcGVuZChmaWxlSW5wdXQsIHN1Ym1pdElucHV0KTtcbiAgICBkaXYuYXBwZW5kKGZvcm0pO1xuICAgIHJldHVybiBkaXY7XG59O1xuZXhwb3J0IHZhciBjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xuICAgIHJldHVybiBlbGVtZW50O1xufTtcbmV4cG9ydCB2YXIgY3JlYXRlQWRtaW5BY2Nlc3NCdXR0b24gPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQsIGxvZ2luUGFnZU1vZGVsSW5zdGFuY2UsIGxvZ2luSGFuZGxlcikge1xuICAgIHZhciBhZG1pbkFjY2Vzc0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcImFkbWluQWNjZXNzXCIpO1xuICAgIGFkbWluQWNjZXNzQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgYWRtaW5BY2Nlc3NCdXR0b24uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJhZG1pbiBhY2Nlc3NcIik7XG4gICAgYWRtaW5BY2Nlc3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcIlwiO1xuICAgICAgICByb290RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICByZW5kZXJBZG1pbkxvZ2luUGFnZShyb290RWxlbWVudCwgbG9naW5QYWdlTW9kZWxJbnN0YW5jZSwgbG9naW5IYW5kbGVyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWRtaW5BY2Nlc3NCdXR0b247XG59O1xuZXhwb3J0IHZhciBjcmVhdGVBZG1pbkF1dGhGb3JtID0gZnVuY3Rpb24gKHJvb3RFbGVtZW50KSB7XG59O1xuIiwiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICcuL0V2ZW50RW1pdHRlcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5QYWdlTW9kZWwgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpXG4gICAgICAgIHRoaXMuX3VzZXJJc0xvZ2dlZEluID0gZmFsc2VcbiAgICB9XG5cbiAgICBzZXRMb2dpblN0YXR1cyh1c2VySXNMb2dnZWRJbikge1xuICAgICAgICB0aGlzLl91c2VySXNMb2dnZWRJbiA9IHVzZXJJc0xvZ2dlZEluXG4gICAgICAgIHRoaXMuZXhlY3V0ZUhhbmRsZXJzKClcbiAgICB9XG5cbiAgICBnZXRMb2dpblN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJc0xvZ2dlZEluXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzID0gW107XG4gICAgfVxuXG4gICAgYWRkQ2hhbmdlRXZlbnRMaXN0ZW5lcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLnB1c2goaGFuZGxlcilcbiAgICB9XG5cbiAgICBleGVjdXRlSGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZXIoKVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuaW1wb3J0IHsgY3JlYXRlQWRtaW5BY2Nlc3NCdXR0b24gfSBmcm9tIFwiLi9odG1sVXRpbHNcIjtcbmltcG9ydCBMb2dpblBhZ2VNb2RlbCBmcm9tIFwiLi9Mb2dpblBhZ2VNb2RlbFwiO1xuaW1wb3J0IHsgY3JlYXRlQmFja2dyb3VuZCwgYmFja2dyb3VuZFVybCB9IGZyb20gXCIuL3V0aWxzXCI7XG5leHBvcnQgdmFyIGxvZ2luSGFuZGxlciA9IFwiaHR0cDovLzEyNy4wLjAuMTozMDAwL2xvZ2luXCI7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcm9vdEVsZW1lbnQsIGxvZ2luUGFnZU1vZGVsSW5zdGFuY2UsIGFkbWluQWNjZXNzQnV0dG9uO1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTtcbiAgICAgICAgICAgICAgICBsb2dpblBhZ2VNb2RlbEluc3RhbmNlID0gbmV3IExvZ2luUGFnZU1vZGVsKCk7XG4gICAgICAgICAgICAgICAgYWRtaW5BY2Nlc3NCdXR0b24gPSBjcmVhdGVBZG1pbkFjY2Vzc0J1dHRvbihyb290RWxlbWVudCwgbG9naW5QYWdlTW9kZWxJbnN0YW5jZSwgbG9naW5IYW5kbGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjcmVhdGVCYWNrZ3JvdW5kKGJhY2tncm91bmRVcmwpXTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgcm9vdEVsZW1lbnQuYXBwZW5kKGFkbWluQWNjZXNzQnV0dG9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICB9KTtcbn0pOyB9KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=